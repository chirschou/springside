<?xml version="1.0" encoding="UTF-8"?>
<project name="hibernate tools" default="generate.code">

	<property name="jdbc.driver" value="derbyclient-10.4.2.0.jar" />
	<property name="hibernate-tools.path" value="../../../../tools/generator/hibernate-tools" />

	<path id="toolslib">
		<path location="${hibernate-tools.path}/lib/hibernate-tools-3.2.4.GA.jar" />
		<path location="${hibernate-tools.path}/lib/hibernate-core-3.3.2.GA.jar" />
		<path location="${hibernate-tools.path}/lib/hibernate-annotations-3.4.0.GA.jar" />
		<path location="${hibernate-tools.path}/lib/hibernate-commons-annotations-3.1.0.GA.jar" />
		<path location="${hibernate-tools.path}/lib/ejb3-persistence-1.0.2.GA.jar" />
		<path location="${hibernate-tools.path}/lib/freemarker-2.3.8.jar" />
		<path location="${hibernate-tools.path}/lib/slf4j-api-1.5.8.jar" />
		<path location="${hibernate-tools.path}/lib/slf4j-simple-1.5.8.jar" />
		<path location="${hibernate-tools.path}/lib/commons-logging-1.1.1.jar" />
		<path location="${hibernate-tools.path}/lib/dom4j-1.6.1.jar" />
		<path location="${hibernate-tools.path}/lib/${jdbc.driver}" />
	</path>

	<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" classpathref="toolslib" />

	<target name="generate.code">
			<hibernatetool destdir="generated" templatepath="${hibernate-tools.path}/template/">
				<classpath>
					<path location="../../webapp/WEB-INF/classes" />
				</classpath>
						
				<annotationconfiguration configurationfile="hibernate.cfg.xml" />

				<hbmtemplate templateprefix="pojo/" template="dao.ftl" filepattern="{package-name}/{class-name}Dao.java"/>
				<hbmtemplate templateprefix="pojo/" template="service.ftl" filepattern="{package-name}/{class-name}Manager.java"/>
			</hibernatetool>
	</target>

	<target name="generate.ddl">
		<hibernatetool destdir="generated">
			<classpath>
				<path location="../../webapp/WEB-INF/classes" />
			</classpath>

			<annotationconfiguration configurationfile="hibernate.cfg.xml" />

			<hbm2ddl export="false" update="false" drop="false" create="false" outputfilename="derby.sql" delimiter=";" format="true" haltonerror="false" />
		</hibernatetool>
	</target>
</project>
